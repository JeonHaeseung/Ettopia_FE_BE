<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charest=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/storeDetail.css') }}">
    <script src="{{ url_for('static', filename='main.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/storeDetail.js') }}" defer></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a875805be5c43dab5e8c887775a0c73d&libraries=services"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>

<body>
    <!--헤더 영역-->
    {% include 'header.html' %}

    <!--맛집 사진 구역-->
    <div id="img_store"><img src="{{data.img_path}}" class="img_head_store"></div> <!--맛집 대표사진 / 사용자가 등록한 대표사진으로 연결-->

    <!--맛집 정보 구역-->
    <div class="info_store">
        <!--가게 이름, 리뷰 및 별점 구역-->
        <div class="wrap_store_side">
            <p class="info_store_name">{{data.store_name}}</p>
            <!--리뷰 및 별점 구역-->
            <div class="wrap_review_and_star">
                <!--리뷰 구역-->
                <div class="wrap_review">
                    <img class="img_store_review" src="{{ url_for('static', filename='icon/icon_writing.png') }}" width="26" height="26">
                    <p class="txt_review_number">{{data.review_num}}</p>
                </div>
                <!--별점 구역-->
                <div class="wrap_star">
                    <div class="wrap_star_store">
                        <img class="img_star_store_1" width="26" height="26" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_store_2" width="26" height="26" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_store_3" width="26" height="26" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_store_4" width="26" height="26" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_store_5" width="26" height="26" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                    </div>
                    <p class="txt_rating_number">{{avg_rate}}</p>
                </div> 
            </div>
        </div>
        <!--맛집 정보 구역 가운데 선 표시-->
        <hr class="divide_section">
        <!-- 맛집 하단 정보 구역-->
        <div class="wrap_store_info">
            <table class="info_store_total">
                <tbody>
                    <tr class="info_store_address">
                        <th>가게주소</th>
                        <td>{{data.addr}}<br></td>
                    </tr>
                    <tr class="info_store_call">
                        <th>전화번호</th>
                        <td>{% if data['tel'] == "" %}
                            -
                            {% endif %}
                            {% if data['tel'] != "" %}
                            {{data.tel}}
                            {% endif %}
                            <br></td>
                    </tr>
                    <tr class="info_store_food">
                        <th>음식 종류</th>
                        <td>{{data.food_category}}<br></td>
                    </tr>
                    <tr class="info_store_openHour">
                        <th>영업시간</th>
                        <td>{{data.hour_open}} - {{data.hour_close}}<br></td>
                    </tr>
                    <tr class="info_store_bill">
                        <th>가격대</th>
                        <td>{{data.min_price}} 이상 {{data.max_price}} 이하<br></td>
                    </tr>
                    <tr class="info_store_parking">
                        <th>주차여부</th>
                        <td>{{data.park}}<br></td>
                    </tr>
                </tbody>
            </table>
            <!--사이트 정보 따로 분류-->
            <table class="info_store_site">
                <tbody>
                    <tr class="info_store_website">
                        <th>사이트</th>
                        <td><a class="txt_site" href="#" target="_blank">{{data.site}}</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!--사이 띄어주기-->
    <p class="wrap_space"></p>
    
    <!--지도 API 영역-->
    <input type="hidden" id="position" value="{{data.position}}"></input>
    <div class="map_wrap">
        <div id="map" style="width:100%;height:100%;position:relative;overflow:hidden;"></div>
    </div>

    <!--사이 띄어주기-->
    <p class="wrap_space"></p>

    <!--소제목 구역-->
    <div class="title">
        <p class="title_mainMenu" href="#">대표메뉴</p>
        <!--대표메뉴 더보기-->
        <form method="post" action="/menuList">
            <input type="hidden" name="restaurant_name" value="{{data.store_name}}">
            <a class="btn_main_plus" href="/menuList/{{category}}/{{data.store_name}}/" height="20" width="20">
                <div class="txt_more">더보기</div>
                <img src="{{ url_for('static', filename='icon/icon_circle_add.png') }}" height="20" width="20" alt="main_plus">
            </a>
        </form>
    </div>
    
    <!--대표메뉴 보여주기-->
    {% if menu_total > 0 %}
        <div class="list_mainMenu">
            {% if menu_total >= 4 %}
                {% for i in range(4) %}
                <div class="list_menu_item 1">
                    <div class="item_area" id="#" href="#">
                        <img class="img_main_menu" src="{{menuData[i].img_path}}" alt="가게 대표사진">
                        <p class="info_menu_name" >{{menuData[i].menu_name}}</p>
                        <p class="info_menu_price">{{menuData[i].menu_price}}</p>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                {% for i in menuRange %}
                <div class="list_menu_item 1">
                    <div class="item_area" id="#" href="#">
                        <img class="img_main_menu" src="{{menuData[i].img_path}}" alt="가게 대표사진">
                        <p class="info_menu_name" >{{menuData[i].menu_name}}</p>
                        <p class="info_menu_price">{{menuData[i].menu_price}}</p>
                    </div>
                </div>
                {% endfor %}
                {% for i in menuLeft %}
                <div class="list_menu_item 1">
                </div>
                {% endfor %}
            {% endif %}
        </div>
    {% else %}
        <img src="{{ url_for('static', filename='icon/icon_crying.png') }}" height="50" width="50" alt="crying">
        <p style="font-family: 'Noto Sans KR', sans-serif;font-weight: 700; font-size: 17px; color: var(--common-dark-grey)">
        아직 등록된 메뉴가 없어요. 첫 메뉴를 등록해 주세요!
        </p>
    {% endif %}

    <!--사이 띄어주기-->
    <p class="wrap_space"></p>

    <!--소제목 구역-->
    <div class="title">
        <p class="title_review" href="#">리뷰보기</p>
        <!--리뷰 더보기-->
        <form method="post" action="/reviewList">
            <input type="hidden" name="restaurant_name" value="{{data.store_name}}">
            <a class="btn_review_plus" href="/reviewList/{{data.store_name}}/" height="20" width="20">
                <div class="txt_more">더보기</div>
                <img src="{{ url_for('static', filename='icon/icon_circle_add.png') }}" height="20" width="20" alt="review_plus">
            </a>
        </form>
    </div>
    
    <!--리뷰 보여주기-->
    {% if review_total > 0 %}
        {% for i in reviewRange %}
        <div class="list_review">
            <img class="img_review_1" src="{{reviewData[i].img_path}}" alt="review_pic1">
            <div class="info_review">
                <div class="wrap_review_written">
                    <p class="txt_review_nickname_1">닉네임</p>
                    <div class="wrap_star_review">
                        <img class="img_star_review_1" width="20" height="20" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_review_2" width="20" height="20" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_review_3" width="20" height="20" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_review_4" width="20" height="20" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                        <img class="img_star_review_5" width="20" height="20" src="{{ url_for('static', filename='icon/icon_rating.png') }}" alt="star_picture">
                    </div>
                </div>
                <div class="txt_review_content">
                    <p class="txt_review_content_1">
                        {{reviewData[i].review_txt}}
                    </p>
                </div>
            </div>
            <!--리뷰 좋아요 구역-->
            <div class="icon_review_favorite_heart">
                <img class="btn_review_favorite" src="{{ url_for('static', filename='icon/icon_like_before.png') }}" width="26" height="23.214">
            </div> 
        </div>
        {% endfor %}
    {% else %}
        <img src="{{ url_for('static', filename='icon/icon_crying.png') }}" height="50" width="50" alt="crying">
        <p style="font-family: 'Noto Sans KR', sans-serif;font-weight: 700; font-size: 17px; color: var(--common-dark-grey)">
        아직 등록된 리뷰가 없어요. 첫 리뷰를 등록해 주세요!
        </p>
    {% endif %}

    <!--푸터 영역-->
    {% include 'footer.html' %}
</body>
</html>
